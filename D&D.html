<html>
<head>
	<style>
	*{padding: 0; margin:0;}
	canvas{ background: #eee; display: block; margin: 0 auto;}
	</style>
</head>
<body>
<canvas id= "myCanvas" width="800" height="600"></canvas>
<script src="keyboard.js"></script>
<script type="text/javascript">
let canvas = document.getElementById("myCanvas");
let ctx = canvas.getContext("2d");
canvas.addEventListener("mousemove", getPosition, false);
canvas.addEventListener("mouseup", getMouseUp, false);
canvas.addEventListener("mousedown", getMouseDown, false);
document.addEventListener("keydown",keyDownHandler, false);
document.addEventListener("keyup",keyUpHandler,false);
ctx.canvas.width  = window.innerWidth;
ctx.canvas.height = window.innerHeight;

let fps = 100;
const wW = window.innerWidth;
const wH = window.innerHeight;
let icons = [];
let windows = [];
let characters = [];
let mouseIsDown = false;
let firstClick = false;
let doubleClick = false;
let oldMouseX = -1;
let oldMouseY = -1;
let mouseTimer = 0;
let openTimer = 0;
let menu = true;
let windowOn = false;
let d20 = false;
let d12 = false;
let d10 = false;
let d8 = false;
let d6 = false;
let d4 = false;
let num = 1;
let diceNum = "1";
let result = 0;

let character1On = false;
let character2On = false;
let character3On = false;
let character4On = false;

let sheet1 = new Image();
sheet1.src = "images/sheet1.png";
let sheet2 = new Image();
sheet2.src = "images/sheet2.png";
let sheet3 = new Image();
sheet3.src = "images/sheet3.png";
let sheet4 = new Image();
sheet4.src = "images/sheet4.png";
let sheet5 = new Image();
sheet5.src = "images/sheet5.png";
let sheet6 = new Image();
sheet6.src = "images/sheet6.png";
let sheet7 = new Image();
sheet7.src = "images/sheet7.png";
let sheet8 = new Image();
sheet8.src = "images/sheet8.png";
let sheet9 = new Image();
sheet9.src = "images/sheet9.png";

let word = [];

function getPosition(event)
{
	mouseX = event.x - canvas.offsetLeft;
	mouseY = event.y - canvas.offsetTop;
}

function getMouseDown(e)
{
	mouseIsDown = true;
	let oldMouseX = mouseX;
	let oldMouseY = mouseY;
	if(doubleClick == true)
	{
		firstClick = true;
		mouseTimer = 0;
	}
	if(firstClick == true && mouseTimer < 60)
	{
		doubleClick = true;
	}
	if(firstClick == true && mouseTimer >= 60)
	{
		firstClick = true;
		mouseTimer = 0;
	}
	else
	{
		firstClick = true;
		mouseTimer = 0;
	}
}

function getMouseUp(e)
{
	mouseIsDown = false;
	//oldMouseX = -1;
	//oldMouseY = -1;
}


function Icon(x1, y1, type, address, width, height, name)
{
	this.x = x1;
	this.y = y1;
	this.type = type;
	this.address = address;
	this.w = width;
	this.h = height;
	this.name = name;
	this.isActive = false;
}

function Window(x1, y1, type, address, width, height, name)
{
	this.x = x1;
	this.y = y1;
	this.type = type;
	this.address = address;
	this.w = width;
	this.h = height;
	this.name = name;
}

function character(slot,name,cClass,level,maxHp,currentHp,race,background,alignment,pName,xp)
{
	this.slot = slot;
	this.name = name;
	this.cClass = cClass;
	this.level = level;
	this.maxHp = maxHp;
	this.currentHp = currentHp;
	this.race = race;
	this.background = background;
	this.alignment = alignment;
	this.pName = pName;
	this.xp = xp;
}

characters.push(new character(1,"Name","Class",1,10,10,"Race","Background","Alignment","Player Name","0"));
characters.push(new character(2,"Name","Class",0,0,0,"Race","Background","Alignment","Player Name","0"));
characters.push(new character(3,"Name","Class",0,0,0,"Race","Background","Alignment","Player Name","0"));
characters.push(new character(4,"Name","Class",0,0,0,"Race","Background","Alignment","Player Name","0"));



icons.push(new Icon(100,100,1,"images/img2.png",100,100,"Character Sheets"));
icons.push(new Icon(300,100,2,"images/img1.png",100,100,"        Spells"));

function drawIcons()
{
	for(let i = 0; i < icons.length; i++)
	{
		let img = new Image();
		img.src = icons[i].address;
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.font = "15px Ariel";
		ctx.drawImage(img, icons[i].x, icons[i].y,
					icons[i].w, icons[i].h * (5/6));
		ctx.fillText(icons[i].name, icons[i].x,
					icons[i].y +(icons[i].h * (5/6)) + 15);
		if(mouseX >= icons[i].x && mouseX <= icons[i].x + icons[i].w &&
			mouseY >= icons[i].y && mouseY <= icons[i].y + icons[i].h &&
			doubleClick == true && menu == true)
		{
			doubleClick = false;
			firstClick = false;
			mouseTimer = 0;
			let winX = 0 + (10 * windows.length);
			let winY = 30 + (10 * windows.length);
			windows.push(new Window(winX,winY,icons[i].type,
			icons[i].address,window.innerWidth,window.innerHeight,icons[i].name));
			windowOn = true;
		}
		if(mouseX >= icons[i].x && mouseX <= icons[i].x + icons[i].w &&
			mouseY >= icons[i].y && mouseY <= icons[i].y + icons[i].h &&
			menu == true)
		{
			ctx.fillStyle = "rgb(210,210,210)";
			ctx.fillRect(icons[i].x,icons[i].y - 2,icons[i].w,icons[i].h + 2);
			ctx.fillStyle = "rgb(0,0,0)";
			ctx.drawImage(img, icons[i].x, icons[i].y, icons[i].w, icons[i].h * (5/6));
			ctx.fillText(icons[i].name, icons[i].x, icons[i].y +(icons[i].h * (5/6)) + 15);
		}
	}
}

function drawWindows()
{
	for(let i = 0; i < windows.length; i++)
	{
		menu = false;
		openTimer++;
		let img = new Image();
		img.src = windows[i].address;
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.font = "32px Ariel";
		ctx.fillStyle = "rgb(150,150,150)";
		ctx.fillRect(windows[i].x, windows[i].y,
					windows[i].w, windows[i].h);
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.fillText(windows[i].name, windows[i].x + 15, windows[i].y -6);
		
		//ctx.drawImage(img, windows[i].x, windows[i].y,
		//				windows[i].w, windows[i].h);
		if(mouseX >= windows[i].x + windows[i].w - 28 &&
			mouseX <= windows[i].x + windows[i].w + 3 &&
			mouseY >= windows[i].y - 30 &&
			mouseY <= windows[i].y)
		{
			ctx.fillStyle = "rgb(255,0,0)";
			ctx.fillRect(windows[i].x + windows[i].w - 28, 
			windows[i].y - 30, 30, 30);
			if(mouseIsDown && openTimer >= 15)
			{
				windows.splice(i,1);
				firstClick = false;
				doubleClick = false;
				menu = true;
				openTimer = 0;
			}
			ctx.fillStyle = "rgb(0,0,0)";
			ctx.font = "32px Ariel";
			ctx.fillText("X", windows[i].x + windows[i].w - 25,
			windows[i].y - 4);
		}
		else
		{
			ctx.fillStyle = "rgb(0,0,0)";
			ctx.font = "32px Ariel";
			ctx.fillText("X", windows[i].x + windows[i].w - 25,
			windows[i].y - 4);
		}
		
		//ctx.fillText(icons[i].name, icons[i].x + 2,
		//				icons[i].y + (icons[i].h * (5/6)) + 5)
		if(windows[i].type == 1)
		{
			ctx.fillStyle = "rgb(100,100,100)";
			ctx.fillRect(windows[i].x + 25, windows[i].y + 25, (windows[i].w/2) - 25, (windows[i].h/2) - 50); //1
			ctx.fillRect((windows[i].w/2) + 25, windows[i].y + 25, (windows[i].w/2) - 50, (windows[i].h/2) - 50); //2
			ctx.fillRect(windows[i].x + 25, (windows[i].h/2) + 25, (windows[i].w/2) - 25, (windows[i].h/2) - 50); //3
			ctx.fillRect((windows[i].w/2) + 25, (windows[i].h/2) + 25, (windows[i].w/2) - 50, (windows[i].h/2) - 50); //4
			ctx.fillStyle = "rgb(0,0,0)";
			
			ctx.font = "40px Ariel";
			ctx.fillText("Character 1", windows[i].x + 75, windows[i].y + 75);
			ctx.fillText("Character 2", (windows[i].w/2) + 75, windows[i].y + 75);
			ctx.fillText("Character 3", windows[i].x + 75, (windows[i].h/2) + 75);
			ctx.fillText("Character 4", (windows[i].w/2) + 75, (windows[i].h/2) + 75);
			
			ctx.font = "30px Ariel";
			ctx.fillText(characters[0].name,windows[i].x + 75, windows[i].y + 100);
			ctx.fillText(characters[1].name,windows[i].w/2 + 75, windows[i].y + 100);
			ctx.fillText(characters[2].name,windows[i].x + 75, windows[i].h/2 + 100);
			ctx.fillText(characters[3].name,windows[i].w/2 + 75, windows[i].h/2 + 100);
			
			ctx.fillText("Level " + characters[0].level + " " + characters[0].race + " " + characters[0].cClass, windows[i].x + 75, windows[i].y + 125);
			ctx.fillText("Level " + characters[1].level + " " + characters[1].race + " " + characters[1].cClass, windows[i].w/2 + 75, windows[i].y + 125);
			ctx.fillText("Level " + characters[2].level + " " + characters[2].race + " " + characters[2].cClass, windows[i].x + 75, windows[i].h/2 + 125);
			ctx.fillText("Level " + characters[3].level + " " + characters[3].race + " " + characters[3].cClass, windows[i].w/2 + 75, windows[i].h/2 + 125);
			
			ctx.fillText(characters[0].currentHp + "/" + characters[0].maxHp + " HP",windows[i].x + 75, windows[i].y + 150);
			ctx.fillText(characters[1].currentHp + "/" + characters[1].maxHp + " HP",windows[i].w/2 + 75, windows[i].y + 150);
			ctx.fillText(characters[2].currentHp + "/" + characters[2].maxHp + " HP",windows[i].x + 75, windows[i].h/2 + 150);
			ctx.fillText(characters[3].currentHp + "/" + characters[3].maxHp + " HP",windows[i].w/2 + 75, windows[i].h/2 + 150);
			
			if(mouseX >= windows[i].x + 25 && mouseX <= (windows[i].w/2) && mouseY >= windows[i].y + 25 && mouseY <= (windows[i].h/2)+5) //1
			{
				ctx.fillStyle = "rgb(80,80,80)";
				ctx.fillRect(windows[i].x + 25, windows[i].y + 25, (windows[i].w/2) - 25, (windows[i].h/2) - 50);
				ctx.fillStyle = "rgb(0,0,0)";
				ctx.font = "40px Ariel";
				ctx.fillText("Character 1", windows[i].x + 75, windows[i].y + 75);
				ctx.font = "30px Ariel";
				ctx.fillText(characters[0].name,windows[i].x + 75, windows[i].y + 100);
				ctx.fillText("Level " + characters[0].level + " " + characters[0].race + " " + characters[0].cClass, windows[i].x + 75, windows[i].y + 125);
				ctx.fillText(characters[0].currentHp + "/" + characters[0].maxHp + " HP",windows[i].x + 75, windows[i].y + 150);
				if(mouseIsDown && openTimer >= 15 && windowOn == true)
				{
					character1On = true;
					windowOn = false;
				}
			}
			if(mouseX >= (windows[i].w/2) + 25 && mouseX <= windows[i].w - 25 && mouseY >= windows[i].y + 25 && mouseY <= (windows[i].h/2)+5) //2
			{
				ctx.fillStyle = "rgb(80,80,80)";
				ctx.fillRect((windows[i].w/2) + 25, windows[i].y + 25, (windows[i].w/2) - 50, (windows[i].h/2) - 50);
				ctx.fillStyle = "rgb(0,0,0)";
				ctx.font = "40px Ariel";
				ctx.fillText("Character 2", (windows[i].w/2) + 75, windows[i].y + 75);
				ctx.font = "30px Ariel";
				ctx.fillText(characters[1].name,windows[i].w/2 + 75, windows[i].y + 100);
				ctx.fillText("Level " + characters[1].level + " " + characters[1].race + " " + characters[1].cClass, windows[i].w/2 + 75, windows[i].y + 125);
				ctx.fillText(characters[1].currentHp + "/" + characters[1].maxHp + " HP",windows[i].w/2 + 75, windows[i].y + 150);
				if(mouseIsDown && openTimer >= 15 && windowOn == true)
				{
					character2On = true;
					windowOn = false;
				}
			}
			if(mouseX >= windows[i].x + 25 && mouseX <= (windows[i].w/2) && mouseY >= (windows[i].h/2) + 25 && mouseY <= windows[i].h - 25) //3
			{
				ctx.fillStyle = "rgb(80,80,80)";
				ctx.fillRect(windows[i].x + 25, (windows[i].h/2) + 25, (windows[i].w/2) - 25, (windows[i].h/2) - 50);
				ctx.fillStyle = "rgb(0,0,0)";
				ctx.font = "40px Ariel";
				ctx.fillText("Character 3", windows[i].x + 75, (windows[i].h/2) + 75);
				ctx.font = "30px Ariel";
				ctx.fillText(characters[2].name,windows[i].x + 75, windows[i].h/2 + 100);
				ctx.fillText("Level " + characters[2].level + " " + characters[2].race + " " + characters[2].cClass, windows[i].x + 75, windows[i].h/2 + 125);
				ctx.fillText(characters[2].currentHp + "/" + characters[2].maxHp + " HP",windows[i].x + 75, windows[i].h/2 + 150);
				if(mouseIsDown && openTimer >= 15 && windowOn == true)
				{
					character3On = true;
					windowOn = false;
				}
			}
			if(mouseX >= (windows[i].w/2) + 25 && mouseX <= windows[i].w - 25 && mouseY >= (windows[i].h/2) + 25 && mouseY <= windows[i].h - 25) //4
			{
				ctx.fillStyle = "rgb(80,80,80)";
				ctx.fillRect((windows[i].w/2) + 25, (windows[i].h/2) + 25, (windows[i].w/2) - 50, (windows[i].h/2) - 50);
				ctx.fillStyle = "rgb(0,0,0)";
				ctx.font = "40px Ariel";
				ctx.fillText("Character 4", (windows[i].w/2) + 75, (windows[i].h/2) + 75);
				ctx.font = "30px Ariel";
				ctx.fillText(characters[3].name,windows[i].w/2 + 75, windows[i].h/2 + 100);
				ctx.fillText("Level " + characters[3].level + " " + characters[3].race + " " + characters[3].cClass, windows[i].w/2 + 75, windows[i].h/2 + 125);
				ctx.fillText(characters[3].currentHp + "/" + characters[3].maxHp + " HP",windows[i].w/2 + 75, windows[i].h/2 + 150);
				if(mouseIsDown && openTimer >= 15 && windowOn == true)
				{
					character4On = true;
					windowOn = false;
				}
			}
		}
	}
}

function characterSheets()
{
	if(character1On)
	{
		ctx.canvas.height = 700;
		ctx.fillStyle = "rgb(230,230,230)";
		ctx.fillRect(0,0,window.innerWidth, 789);
		ctx.fillStyle = "rgb(255,255,255)";
		ctx.fillRect(0,-10,1230,700);
		ctx.drawImage(sheet1, 0, 75-85, 700, 140);
		ctx.drawImage(sheet2, 700, 75-85, 275, 675);
		ctx.drawImage(sheet3, 0, 215-85, 250, 335);
		ctx.drawImage(sheet4, 250, 215-85, 240, 300);
		ctx.drawImage(sheet5, 975, 625, 250, 49);
		ctx.drawImage(sheet6, 0, 550-85, 250, 225);
		ctx.drawImage(sheet8, 485, 200-85, 220, 325);
		ctx.drawImage(sheet7, 250, 515-85, 240, 260);
		ctx.drawImage(sheet9, 975, 0, 250, 630);
		
		//exit
		if(mouseX >= 0 && mouseX <= 30 && mouseY >= 0 && mouseY <= 30)
		{
			ctx.fillStyle = "rgb(255,0,0)";
			ctx.fillRect(0,0,30,30);
			if(mouseIsDown)
			{
				character1On = false;
				windowOn = true;
				ctx.canvas.height = window.innerHeight;
				openTimer = 0;
			}
			ctx.fillStyle = "rgb(0,0,0)";
			ctx.font = "32px Ariel";
			ctx.fillText("X", 3, 26);
		}
		else
		{
			ctx.fillStyle = "rgb(210,210,210)";
			ctx.fillRect(0,0,30,30);
			ctx.fillStyle = "rgb(0,0,0)";
			ctx.font = "32px Ariel";
			ctx.fillText("X", 3, 26);
		}
		
	//character info
		{
		//class
		let word1 = word.slice();
		if(oldMouseX >= 315 && oldMouseX <= 375 && oldMouseY >= 40 && oldMouseY <= 55)
		{
			if(mouseIsDown)
			{
				word = [];
			}
			else
			{
				characters[0].cClass = word1.join("");
				localStorage.setItem("c1Class", characters[0].cClass);
				ctx.fillStyle = "rgba(220,220,220,.8)";
				ctx.fillRect(315,40,60,15);
			}
		}
		if(mouseX >= 315 && mouseX <= 375 && mouseY >= 40 && mouseY <= 55)
		{
			ctx.fillStyle = "rgba(220,220,220,.8)";
			ctx.fillRect(315,40,60,15);
		}
		
		//race
		if(oldMouseX >= 314 && oldMouseX <= 374 && oldMouseY >= 70 && oldMouseY <= 85)
		{
			if(mouseIsDown)
			{
				word = [];
			}
			else
			{
				characters[0].race = word1.join("");
				localStorage.setItem("c1Race", characters[0].race);
				ctx.fillStyle = "rgba(220,220,220,.8)";
				ctx.fillRect(314,70,60,15);
			}
		}
		if(mouseX >= 314 && mouseX <= 374 && mouseY >= 70 && mouseY <= 85)
		{
			ctx.fillStyle = "rgba(220,220,220,.8)";
			ctx.fillRect(314,70,60,15);
		}
		
		//background
		if(oldMouseX >= 450 && oldMouseX <= 510 && oldMouseY >= 40 && oldMouseY <= 55)
		{
			if(mouseIsDown)
			{
				word = [];
			}
			else
			{
				characters[0].background = word1.join("");
				localStorage.setItem("c1Background", characters[0].background);	
				ctx.fillStyle = "rgba(220,220,220,.8)";
				ctx.fillRect(448,40,60,15);
			}
		}
		if(mouseX >= 450 && mouseX <= 510 && mouseY >= 40 && mouseY <= 55)
		{
			ctx.fillStyle = "rgba(220,220,220,.8)";
			ctx.fillRect(448,40,60,15);
		}
		
		//alignment
		if(oldMouseX >= 450 && oldMouseX <= 510 && oldMouseY >= 70 && oldMouseY <= 85)
		{
			if(mouseIsDown)
			{
				word = [];
			}
			else
			{
				characters[0].alignment = word1.join("");
				localStorage.setItem("c1Alignment", characters[0].alignment);
				ctx.fillStyle = "rgba(220,220,220,.8)";
				ctx.fillRect(448,70,60,15);
			}
		}
		if(mouseX >= 450 && mouseX <= 510 && mouseY >= 70 && mouseY <= 85)
		{
			ctx.fillStyle = "rgba(220,220,220,.8)";
			ctx.fillRect(448,70,60,15);
		}
		
		//player name
		if(oldMouseX >= 560 && oldMouseX <= 620 && oldMouseY >= 40 && oldMouseY <= 55)
		{
			if(mouseIsDown)
			{
				word = [];
			}
			else
			{
				characters[0].pName = word1.join("");
				localStorage.setItem("c1pName", characters[0].pName);
				ctx.fillStyle = "rgba(220,220,220,.8)";
				ctx.fillRect(560,40,60,15);
			}
		}
		if(mouseX >= 560 && mouseX <= 620 && mouseY >= 40 && mouseY <= 55)
		{
			ctx.fillStyle = "rgba(220,220,220,.8)";
			ctx.fillRect(560,40,60,15);
		}
		
		//experience
		if(oldMouseX >= 560 && oldMouseX <= 620 && oldMouseY >= 70 && oldMouseY <= 85)
		{
			if(mouseIsDown)
			{
				word = [];
			}
			else
			{
				characters[0].xp = word1.join("");
				localStorage.setItem("c1XP", characters[0].xp);
				ctx.fillStyle = "rgba(220,220,220,.8)";
				ctx.fillRect(560,70,60,15);
			}
		}
		if(mouseX >= 560 && mouseX <= 620 && mouseY >= 70 && mouseY <= 85)
		{
			ctx.fillStyle = "rgba(220,220,220,.8)";
			ctx.fillRect(560,70,60,15);
		}
		
		//name
		if(oldMouseX >= 60 && oldMouseX <= 250 && oldMouseY >= 50 && oldMouseY <= 80)
		{
			if(mouseIsDown)
			{
				word = [];
			}
			else
			{
				characters[0].name = word1.join("");
				localStorage.setItem("c1Name", characters[0].name);
				ctx.fillStyle = "rgba(220,220,220,.8)";
				ctx.fillRect(60,50,190,30);
			}
		}
		if(mouseX >= 60 && mouseX <= 250 && mouseY >= 50 && mouseY <= 80)
		{
			ctx.fillStyle = "rgba(220,220,220,.8)";
			ctx.fillRect(60,50,190,30);
		}
		
		//max health
		if(oldMouseX >= 115 && oldMouseX <= 190 && oldMouseY >= 230 && oldMouseY <= 245)
		{
			if(mouseIsDown)
			{
				word = [];
			}
			else
			{
				characters[0].maxHp = word1.join("");
				ctx.fillStyle = "rgba(220,220,220,.8)";
				ctx.fillRect(115,230,75,15);
			}
		}
		if(mouseX >= 115 && mouseX <= 190 && mouseY >= 230 && mouseY <= 245)
		{
			ctx.fillStyle = "rgba(220,220,220,.8)";
			ctx.fillRect(115,230,75,15);
		}
		
		//current health
		if(oldMouseX >= 40 && oldMouseX <= 210 && oldMouseY >= 250 && oldMouseY <= 285)
		{
			if(mouseIsDown)
			{
				word = [];
			}
			else
			{
				characters[0].currentHp = word1.join("");
				ctx.fillStyle = "rgba(220,220,220,.8)";
				ctx.fillRect(40,250,170,30);
			}
		}
		if(mouseX >= 40 && mouseX <= 210 && mouseY >= 250 && mouseY <= 285)
		{
			ctx.fillStyle = "rgba(220,220,220,.8)";
			ctx.fillRect(40,250,170,30);
		}
		}
		
		ctx.font = "20px Ariel";
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.fillText(characters[0].name,60,155-85);
		
		ctx.font = "15px Ariel";
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.fillText(characters[0].cClass + " " + characters[0].level, 320, 140-85);
		
		ctx.fillText(characters[0].maxHp, 115, 325-85);
		
		//wrapText(ctx,characters[0].race,319,85,100,20);
		ctx.fillText(characters[0].race, 319, 85);
		ctx.fillText(characters[0].background, 450, 55);
		ctx.fillText(characters[0].alignment, 450, 85);
		ctx.fillText(characters[0].pName, 563, 55);
		ctx.fillText(characters[0].xp, 563, 85);
		
		
		
		ctx.font = "25px Ariel";
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.fillText(characters[0].currentHp, 110, 360-85);
		
		//dice
		dice();
	}
	if(character2On)
	{
		ctx.canvas.height = 700;
		ctx.fillStyle = "rgb(230,230,230)";
		ctx.fillRect(0,0,window.innerWidth, 789);
		ctx.fillStyle = "rgb(255,255,255)";
		ctx.fillRect(0,-10,1230,700);
		ctx.drawImage(sheet1, 0, 75-85, 700, 140);
		ctx.drawImage(sheet2, 700, 75-85, 275, 675);
		ctx.drawImage(sheet3, 0, 215-85, 250, 335);
		ctx.drawImage(sheet4, 250, 215-85, 240, 300);
		ctx.drawImage(sheet5, 975, 625, 250, 49);
		ctx.drawImage(sheet6, 0, 550-85, 250, 225);
		ctx.drawImage(sheet8, 485, 200-85, 220, 325);
		ctx.drawImage(sheet7, 250, 515-85, 240, 260);
		ctx.drawImage(sheet9, 975, 0, 250, 630);
		
		if(mouseX >= 0 && mouseX <= 30 && mouseY >= 0 && mouseY <= 30)
		{
			ctx.fillStyle = "rgb(255,0,0)";
			ctx.fillRect(0,0,30,30);
			if(mouseIsDown)
			{
				character2On = false;
				windowOn = true;
				ctx.canvas.height = window.innerHeight;
				openTimer = 0;
			}
			ctx.fillStyle = "rgb(0,0,0)";
			ctx.font = "32px Ariel";
			ctx.fillText("X", 3, 26);
		}
		else
		{
			ctx.fillStyle = "rgb(210,210,210)";
			ctx.fillRect(0,0,30,30);
			ctx.fillStyle = "rgb(0,0,0)";
			ctx.font = "32px Ariel";
			ctx.fillText("X", 3, 26);
		}
		
		//character info
		
		ctx.font = "20px Ariel";
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.fillText(characters[1].name,60,155-85);
		
		ctx.font = "15px Ariel";
		ctx.fillText(characters[1].cClass + " " + characters[1].level, 320, 140-85);
		ctx.fillText(characters[1].maxHp, 115, 325-85);
		ctx.fillText(characters[1].race, 319, 85);
		ctx.fillText(characters[1].background, 450, 55);
		ctx.fillText(characters[1].alignment, 450, 85);
		ctx.fillText(characters[1].pName, 563, 55);
		ctx.fillText(characters[1].xp, 563, 85);
		
		ctx.font = "25px Ariel";
		ctx.fillText(characters[1].currentHp, 110, 360-85);
		
		dice()
	}
	if(character3On)
	{
		ctx.canvas.height = 700;
		ctx.fillStyle = "rgb(230,230,230)";
		ctx.fillRect(0,0,window.innerWidth, 789);
		ctx.fillStyle = "rgb(255,255,255)";
		ctx.fillRect(0,-10,1230,700);
		ctx.drawImage(sheet1, 0, 75-85, 700, 140);
		ctx.drawImage(sheet2, 700, 75-85, 275, 675);
		ctx.drawImage(sheet3, 0, 215-85, 250, 335);
		ctx.drawImage(sheet4, 250, 215-85, 240, 300);
		ctx.drawImage(sheet5, 975, 625, 250, 49);
		ctx.drawImage(sheet6, 0, 550-85, 250, 225);
		ctx.drawImage(sheet8, 485, 200-85, 220, 325);
		ctx.drawImage(sheet7, 250, 515-85, 240, 260);
		ctx.drawImage(sheet9, 975, 0, 250, 630);
		
		if(mouseX >= 0 && mouseX <= 30 && mouseY >= 0 && mouseY <= 30)
		{
			ctx.fillStyle = "rgb(255,0,0)";
			ctx.fillRect(0,0,30,30);
			if(mouseIsDown)
			{
				character3On = false;
				windowOn = true;
				ctx.canvas.height = window.innerHeight;
				openTimer = 0;
			}
			ctx.fillStyle = "rgb(0,0,0)";
			ctx.font = "32px Ariel";
			ctx.fillText("X", 3, 26);
		}
		else
		{
			ctx.fillStyle = "rgb(210,210,210)";
			ctx.fillRect(0,0,30,30);
			ctx.fillStyle = "rgb(0,0,0)";
			ctx.font = "32px Ariel";
			ctx.fillText("X", 3, 26);
		}
		
		//character info
		
		ctx.font = "20px Ariel";
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.fillText(characters[2].name,60,155-85);
		
		ctx.font = "15px Ariel";
		ctx.fillText(characters[2].cClass + " " + characters[2].level, 320, 140-85);
		ctx.fillText(characters[2].maxHp, 115, 325-85);
		ctx.fillText(characters[2].race, 319, 85);
		ctx.fillText(characters[2].background, 450, 55);
		ctx.fillText(characters[2].alignment, 450, 85);
		ctx.fillText(characters[2].pName, 563, 55);
		ctx.fillText(characters[2].xp, 563, 85);
		
		ctx.font = "25px Ariel";
		ctx.fillText(characters[2].currentHp, 110, 360-85);
		
		dice();
	}
	if(character4On)
	{
		ctx.canvas.height = 700;
		ctx.fillStyle = "rgb(230,230,230)";
		ctx.fillRect(0,0,window.innerWidth, 789);
		ctx.fillStyle = "rgb(255,255,255)";
		ctx.fillRect(0,-10,1230,700);
		ctx.drawImage(sheet1, 0, 75-85, 700, 140);
		ctx.drawImage(sheet2, 700, 75-85, 275, 675);
		ctx.drawImage(sheet3, 0, 215-85, 250, 335);
		ctx.drawImage(sheet4, 250, 215-85, 240, 300);
		ctx.drawImage(sheet5, 975, 625, 250, 49);
		ctx.drawImage(sheet6, 0, 550-85, 250, 225);
		ctx.drawImage(sheet8, 485, 200-85, 220, 325);
		ctx.drawImage(sheet7, 250, 515-85, 240, 260);
		ctx.drawImage(sheet9, 975, 0, 250, 630);
		
		if(mouseX >= 0 && mouseX <= 30 && mouseY >= 0 && mouseY <= 30)
		{
			ctx.fillStyle = "rgb(255,0,0)";
			ctx.fillRect(0,0,30,30);
			if(mouseIsDown)
			{
				character4On = false;
				windowOn = true;
				ctx.canvas.height = window.innerHeight;
				openTimer = 0;
			}
			ctx.fillStyle = "rgb(0,0,0)";
			ctx.font = "32px Ariel";
			ctx.fillText("X", 3, 26);
		}
		else
		{
			ctx.fillStyle = "rgb(210,210,210)";
			ctx.fillRect(0,0,30,30);
			ctx.fillStyle = "rgb(0,0,0)";
			ctx.font = "32px Ariel";
			ctx.fillText("X", 3, 26);
		}
		
		//character info
		
		ctx.font = "20px Ariel";
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.fillText(characters[3].name,60,155-85);
		
		ctx.font = "15px Ariel";
		ctx.fillText(characters[3].cClass + " " + characters[3].level, 320, 140-85);
		ctx.fillText(characters[3].maxHp, 115, 325-85);
		ctx.fillText(characters[3].race, 319, 85);
		ctx.fillText(characters[3].background, 450, 55);
		ctx.fillText(characters[3].alignment, 450, 85);
		ctx.fillText(characters[3].pName, 563, 55);
		ctx.fillText(characters[3].xp, 563, 85);
		
		ctx.font = "25px Ariel";
		ctx.fillText(characters[3].currentHp, 110, 360-85);
		
		dice();
	}
}
function dice()
{
	let word2 = word.slice();
	if(mouseX >= 615 && mouseX <= 665 && mouseY >= 580 && mouseY <= 605)
	{
		ctx.fillStyle = "rgba(220,220,220,.8)";
		ctx.fillRect(615,580,50,25);
	}
	if(oldMouseX >= 615 && oldMouseX <= 665 && oldMouseY >= 580 && oldMouseY <= 605)
	{
		if(mouseIsDown)
		{
			word = [];
		}
		else
		{
			diceNum = word2.join("");
			ctx.fillStyle = "rgba(220,220,220,.8)";
			ctx.fillRect(615,580,50,25);
		}
	}
	ctx.fillStyle = "rgb(0,0,0)";
	ctx.font = "20px Ariel";
	ctx.fillText("How many?",515,600)
	ctx.textAlign = "center";
	ctx.fillText(diceNum,640,600);
	num = parseInt(diceNum);
	ctx.textAlign = "start";
	
	//roll button
	ctx.font = "30px Ariel";
	ctx.fillStyle = "rgb(175,175,175)";
	ctx.fillRect(515,555-85,155,75);
	ctx.fillStyle = "rgb(0,0,0)";
	ctx.fillText("Roll Dice", 535, 600-85);
	if(mouseX >= 515 && mouseX <= 670 && mouseY >= 555-85 && mouseY <= 630-85)
	{
		ctx.fillStyle = "rgb(140,140,140)";
		ctx.fillRect(515,555-85,155,75);
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.font = "30px Ariel";
		ctx.fillText("Roll Dice", 535, 600-85);
		if(mouseIsDown && firstClick)
		{
			firstClick = false;
			result = 0;
			for(let i = 0; i < num; i++)
			{
				if(d20)
				{
					result += Math.floor(Math.random()*20)+1;
				}
				if(d12)
				{
					result += Math.floor(Math.random()*12)+1;
				}
				if(d10)
				{
					result += Math.floor(Math.random()*10)+1;
				}
				if(d8)
				{
					result += Math.floor(Math.random()*8)+1;
				}
				if(d6)
				{
					result += Math.floor(Math.random()*6)+1;
				}
				if(d4)
				{
					result += Math.floor(Math.random()*4)+1;
				}
			}
		}
	}
	//d20
	ctx.fillStyle = "rgb(175,175,175)";
	ctx.fillRect(515,530-85,45,20);
	ctx.font = "15px Ariel";
	ctx.fillStyle = "rgb(0,0,0)";
	ctx.fillText("d20", 525, 545-85);
	if(mouseX >= 515 && mouseX <= 560 && mouseY >= 530-85 && mouseY <= 550-85)
	{
		ctx.fillStyle = "rgb(140,140,140)";
		ctx.fillRect(515,530-85,45,20);
		ctx.font = "15px Ariel";
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.fillText("d20", 525, 545-85);
		if(mouseIsDown)
		{
			d20 = true;
			d12 = false;
			d10 = false;
			d8 = false;
			d6 = false;
			d4 = false;
		}
	}
	if(d20)
	{
		ctx.fillStyle = "rgb(140,140,140)";
		ctx.fillRect(515,530-85,45,20);
		ctx.fillStyle = "rgb(0,0,0)";
	ctx.fillText("d20", 525, 545-85);
	}
	//d12
	ctx.fillStyle = "rgb(175,175,175)";
	ctx.fillRect(570,530-85,45,20);
	ctx.font = "15px Ariel";
	ctx.fillStyle = "rgb(0,0,0)";
	ctx.fillText("d12", 580, 545-85);
	if(mouseX >= 570 && mouseX <= 615 && mouseY >= 530-85 && mouseY <= 550-85)
	{
		ctx.fillStyle = "rgb(140,140,140)";
		ctx.fillRect(570,530-85,45,20);
		ctx.font = "15px Ariel";
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.fillText("d12", 580, 545-85);
		if(mouseIsDown)
		{
			d20 = false;
			d12 = true;
			d10 = false;
			d8 = false;
			d6 = false;
			d4 = false;
		}
	}
	if(d12)
	{
		ctx.fillStyle = "rgb(140,140,140)";
		ctx.fillRect(570,530-85,45,20);
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.fillText("d12", 580, 545-85);
	}
	//d10
	ctx.fillStyle = "rgb(175,175,175)";
	ctx.fillRect(625,530-85,45,20);
	ctx.font = "15px Ariel";
	ctx.fillStyle = "rgb(0,0,0)";
	ctx.fillText("d10", 635, 545-85);
	if(mouseX >= 625 && mouseX <= 670 && mouseY >= 530-85 && mouseY <= 550-85)
	{
		ctx.fillStyle = "rgb(140,140,140)";
		ctx.fillRect(625,530-85,45,20);
		ctx.font = "15px Ariel";
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.fillText("d10", 635, 545-85);
		if(mouseIsDown)
		{
			d20 = false;
			d12 = false;
			d10 = true;
			d8 = false;
			d6 = false;
			d4 = false;
		}
	}
	if(d10)
	{
		ctx.fillStyle = "rgb(140,140,140)";
		ctx.fillRect(625,530-85,45,20);
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.fillText("d10", 635, 545-85);
	}
	//d8
	ctx.fillStyle = "rgb(175,175,175)";
	ctx.fillRect(515,635-85,45,20);
	ctx.font = "15px Ariel";
	ctx.fillStyle = "rgb(0,0,0)";
	ctx.fillText("d8", 530, 650-85);
	if(mouseX >= 515 && mouseX <= 560 && mouseY >= 635-85 && mouseY <= 655-85)
	{
		ctx.fillStyle = "rgb(140,140,140)";
		ctx.fillRect(515,635-85,45,20);
		ctx.font = "15px Ariel";
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.fillText("d8", 530, 650-85);
		if(mouseIsDown)
		{
			d20 = false;
			d12 = false;
			d10 = false;
			d8 = true;
			d6 = false;
			d4 = false;
		}
	}
	if(d8)
	{
		ctx.fillStyle = "rgb(140,140,140)";
		ctx.fillRect(515,635-85,45,20);
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.fillText("d8", 530, 650-85);
	}
	//d6
	ctx.fillStyle = "rgb(175,175,175)";
	ctx.fillRect(570,635-85,45,20);
	ctx.font = "15px Ariel";
	ctx.fillStyle = "rgb(0,0,0)";
	ctx.fillText("d6", 585, 650-85);
	if(mouseX >= 570 && mouseX <= 615 && mouseY >= 635-85 && mouseY <= 655-85)
	{
		ctx.fillStyle = "rgb(140,140,140)";
		ctx.fillRect(570,635-85,45,20);
		ctx.font = "15px Ariel";
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.fillText("d6", 585, 650-85);
		if(mouseIsDown)
		{
			d20 = false;
			d12 = false;
			d10 = false;
			d8 = false;
			d6 = true;
			d4 = false;
		}
	}
	if(d6)
	{
		ctx.fillStyle = "rgb(140,140,140)";
		ctx.fillRect(570,635-85,45,20);
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.fillText("d6", 585, 650-85);
	}
	//d4
	ctx.fillStyle = "rgb(175,175,175)";
	ctx.fillRect(625,635-85,45,20);
	ctx.font = "15px Ariel";
	ctx.fillStyle = "rgb(0,0,0)";
	ctx.fillText("d4", 640, 650-85);
	if(mouseX >= 625 && mouseX <= 670 && mouseY >= 635-85 && mouseY <= 655-85)
	{
		ctx.fillStyle = "rgb(140,140,140)";
		ctx.fillRect(625,635-85,45,20);
		ctx.font = "15px Ariel";
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.fillText("d4", 640, 650-85);
		if(mouseIsDown)
		{
			d20 = false;
			d12 = false;
			d10 = false;
			d8 = false;
			d6 = false;
			d4 = true;
		}
	}
	if(d4)
	{
		ctx.fillStyle = "rgb(175,175,175)";
		ctx.fillRect(625,635-85,45,20);
		ctx.fillStyle = "rgb(0,0,0)";
		ctx.fillText("d4", 640, 650-85);
	}
	
	
	ctx.strokeStyle = "rgb(0,0,0)";
	ctx.strokeRect(550,620,100,50);
	ctx.font = "25px Ariel";
	ctx.fillStyle = "rgb(0,0,0)";
	ctx.textAlign = "center";
	ctx.fillText(result, 600, 655);
	ctx.textAlign = "start";
}

function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
    var words = text.split(' ');
    var line = '';

    for(var n = 0; n < words.length; n++) {
      var testLine = line + words[n] + ' ';
      var metrics = ctx.measureText(testLine);
      var testWidth = metrics.width;
      if (testWidth > maxWidth && n > 0) {
        ctx.fillText(line, x, y);
        line = words[n] + ' ';
        y += lineHeight;
      }
      else {
        line = testLine;
      }
    }
    ctx.fillText(line, x, y);
  }

function useLocalStorage()
{
	var c1Name = localStorage.getItem("c1Name");
	characters[0].name = c1Name;
	var c1Class = localStorage.getItem("c1Class");
	characters[0].cClass = c1Class;
	var c1Race = localStorage.getItem("c1Race");
	characters[0].race = c1Race;
	var c1Background = localStorage.getItem("c1Background");
	characters[0].background = c1Background;
	var c1Alignment = localStorage.getItem("c1Alignment");
	characters[0].alignment = c1Alignment;
	var c1pName = localStorage.getItem("c1pName");
	characters[0].pName = c1pName;
	var c1XP = localStorage.getItem("c1XP");
	characters[0].xp = c1XP;
}

//window.open("pdf url here", '_blank');

function draw() {
	setTimeout(function() {
	requestAnimationFrame(draw);
	ctx.clearRect(0,0,wW,wH);
	///all code goes here
	mouseTimer++;
	drawIcons();
	drawWindows();
	characterSheets();
	useLocalStorage();
	if(mouseIsDown)
	{
		oldMouseX = mouseX;
		oldMouseY = mouseY;
	}
	}, 1000/fps);
}
draw();

</script>
</body>
</html>